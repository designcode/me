---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostList from "../components/PostList.astro";
import CategorySidebar from "../components/CategorySidebar.astro";
import { processPosts, sortPostsByDate, getUniqueCategories, getUniqueYears } from "../lib/posts";

const postFiles = import.meta.glob("./posts/*.mdx", { eager: true });
const posts = sortPostsByDate(processPosts(postFiles));
const categories = getUniqueCategories(posts);
const years = getUniqueYears(posts);
---

<BaseLayout
  title="designcode.me"
  description="Thoughts and Ramblings of a programmer and long distance runner"
>
  <CategorySidebar categories={categories} years={years} slot="sidebar" />
  <PostList posts={posts} showDescription={false} />
</BaseLayout>
