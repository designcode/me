---
interface Props {
  posts: any[];
  showDescription?: boolean;
}

const { posts, showDescription = true } = Astro.props;
---

<div class="posts-list">
  {posts.map(post => {
    const isExternal = !!post.frontmatter.externalUrl;
    const linkUrl = isExternal ? post.frontmatter.externalUrl : post.url;
    const linkProps = isExternal ? { target: '_blank', rel: 'noopener noreferrer' } : {};

    return (
      <article class="post-item">
        <h2 class="post-title">
          <a href={linkUrl} class="post-link" {...linkProps}>
            {post.frontmatter.title}
            {isExternal && ' â†’'}
          </a>
        </h2>
        <div class="post-meta">
          <p class="post-date">
            {new Date(post.frontmatter.date).toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </p>
          {post.frontmatter.category && (
            <span class="post-category">{post.frontmatter.category}</span>
          )}
        </div>
        {showDescription && post.frontmatter.description && (
          <p class="post-description">
            {post.frontmatter.description}
          </p>
        )}
      </article>
    );
  })}
</div>
